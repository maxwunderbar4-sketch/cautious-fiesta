<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentine?</title>
  <style>
    :root { --bg:#fff6fb; --card:#ffffff; --text:#2b2b2b; --pink:#ff4d8d; --gray:#6b7280; }
    * { box-sizing: border-box; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    body {
      margin: 0; min-height: 100vh; display: grid; place-items: center;
      background: radial-gradient(1200px 600px at 50% 0%, #ffe3f0 0%, var(--bg) 45%, #fff 100%);
      color: var(--text);
      padding: 24px;
      overflow-x: hidden;
    }
    .card{
      width: min(560px, 100%);
      background: var(--card);
      border-radius: 24px;
      padding: 28px;
      box-shadow: 0 18px 60px rgba(255, 77, 141, .18);
      border: 1px solid rgba(255,77,141,.18);
      text-align: center;
      position: relative;
      z-index: 1;
    }
    h1 { margin: 0 0 18px; font-size: clamp(24px, 4vw, 34px); }
    .btns { display: flex; gap: 12px; justify-content: center; margin: 16px 0 6px; flex-wrap: wrap; }
    button{
      border: 0; border-radius: 14px; padding: 12px 18px;
      font-size: 16px; font-weight: 800; cursor: pointer;
      transition: transform .08s ease, box-shadow .2s ease, opacity .2s ease;
      min-width: 140px;
      will-change: transform;
    }
    button:active{ transform: scale(.98); }
    .yes{ background: var(--pink); color: white; box-shadow: 0 12px 24px rgba(255,77,141,.25); }
    .no{ background: #eef2f7; color: #111827; }
    .hint{ color: var(--gray); font-size: 14px; margin-top: 10px; }
    .msg{ margin-top: 14px; font-size: 16px; font-weight: 700; }
    .gifwrap{ margin-top: 18px; display:none; }
    .gifwrap img{ width: min(360px, 90%); border-radius: 18px; box-shadow: 0 10px 24px rgba(0,0,0,.12); }
    .tiny{ margin-top: 14px; font-size: 12px; color: var(--gray); }

    /* Confetti canvas overlay */
    #confettiCanvas{
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 9999;
    }
  </style>
</head>
<body>
  <!-- Confetti layer -->
  <canvas id="confettiCanvas"></canvas>

  <main class="card">
    <h1>Would you be my valentine? ðŸ’˜</h1>

    <div class="btns">
      <button class="yes" id="yesBtn">Ja</button>
      <button class="no" id="noBtn">Nein</button>
    </div>

    <div class="msg" id="msg"></div>

    <div class="gifwrap" id="gifwrap" aria-live="polite">
      <img id="gif" alt="cute gif" src="https://media.giphy.com/media/3oriO0OEd9QIDdllqo/giphy.gif" />
    </div>

    <div class="hint">Tipp: Du kannst das GIF spÃ¤ter durch dein Lieblings-GIF ersetzen.</div>
    <div class="tiny">Made with ðŸ’—</div>
  </main>

  <script>
    // -----------------------------
    // URL state helper (?a=yes / ?a=no)
    // -----------------------------
    function setAnswer(a){
      const url = new URL(window.location.href);
      url.searchParams.set("a", a);
      history.replaceState({}, "", url);
    }

    // -----------------------------
    // Heart confetti (reliable, no external libs)
    // -----------------------------
    const canvas = document.getElementById("confettiCanvas");
    const ctx = canvas.getContext("2d", { alpha: true });

    function resizeCanvas() {
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      canvas.width = Math.floor(window.innerWidth * dpr);
      canvas.height = Math.floor(window.innerHeight * dpr);
      canvas.style.width = window.innerWidth + "px";
      canvas.style.height = window.innerHeight + "px";
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    const particles = [];
    let running = false;

    function rand(min, max){ return Math.random() * (max - min) + min; }

    function drawHeart(x, y, size, rot, color, alpha) {
      ctx.save();
      ctx.translate(x, y);
      ctx.rotate(rot);
      ctx.globalAlpha = alpha;
      ctx.fillStyle = color;

      const s = size;
      ctx.beginPath();
      ctx.moveTo(0, s * 0.35);
      ctx.bezierCurveTo(0, 0, -s * 0.6, 0, -s * 0.6, s * 0.35);
      ctx.bezierCurveTo(-s * 0.6, s * 0.8, 0, s * 1.05, 0, s * 1.35);
      ctx.bezierCurveTo(0, s * 1.05, s * 0.6, s * 0.8, s * 0.6, s * 0.35);
      ctx.bezierCurveTo(s * 0.6, 0, 0, 0, 0, s * 0.35);
      ctx.closePath();
      ctx.fill();

      ctx.restore();
    }

    function spawnBurst(cx, cy, count) {
      const colors = ["#ff4d8d", "#ff2d55", "#ff6aa2", "#ff3b7a", "#ff5ea8"];
      for (let i = 0; i < count; i++) {
        const speed = rand(4.5, 10.5);
        const angle = rand(-Math.PI, 0); // upward hemisphere
        particles.push({
          x: cx,
          y: cy,
          vx: Math.cos(angle) * speed * rand(0.65, 1.15),
          vy: Math.sin(angle) * speed * rand(0.65, 1.15),
          g: rand(0.12, 0.22),
          rot: rand(0, Math.PI * 2),
          vr: rand(-0.12, 0.12),
          size: rand(12, 24),      // big hearts
          color: colors[(Math.random() * colors.length) | 0],
          alpha: 1,
          life: rand(70, 120)      // frames
        });
      }
    }

    function heartFirework() {
      const w = window.innerWidth;
      const h = window.innerHeight;

      // big center burst + side bursts
      spawnBurst(w * 0.50, h * 0.62, 130);
      spawnBurst(w * 0.20, h * 0.65, 60);
      spawnBurst(w * 0.80, h * 0.65, 60);

      if (!running) {
        running = true;
        requestAnimationFrame(tick);
      }
    }

    function tick() {
      ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);

      for (let i = particles.length - 1; i >= 0; i--) {
        const p = particles[i];
        p.vy += p.g;
        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.vr;
        p.life -= 1;

        if (p.life < 25) p.alpha = Math.max(0, p.life / 25);

        drawHeart(p.x, p.y, p.size, p.rot, p.color, p.alpha);

        if (p.life <= 0 || p.y > window.innerHeight + 100 || p.x < -120 || p.x > window.innerWidth + 120) {
          particles.splice(i, 1);
        }
      }

      if (particles.length > 0) {
        requestAnimationFrame(tick);
      } else {
        running = false;
        ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
      }
    }

    // -----------------------------
    // UI Logic
    // -----------------------------
    const yesBtn  = document.getElementById("yesBtn");
    const noBtn   = document.getElementById("noBtn");
    const msg     = document.getElementById("msg");
    const gifwrap = document.getElementById("gifwrap");
    const gif     = document.getElementById("gif");

    // YES click: show GIF + confetti
    yesBtn.addEventListener("click", () => {
      msg.textContent = "Yaaay! ðŸ’–";
      gifwrap.style.display = "block";

      // Confetti / firework
      heartFirework();

      // restart GIF
      const src = gif.src;
      gif.src = "";
      gif.src = src;

      setAnswer("yes");
    });

    // NO click: make YES bigger each time
    let scale = 1;
    noBtn.addEventListener("click", () => {
      msg.textContent = "Oh no ðŸ˜­ Versuch es nochmal...";

      scale += 0.25;
      yesBtn.style.transform = `scale(${scale})`;

      noBtn.style.transform = "scale(0.95)";
      setTimeout(() => (noBtn.style.transform = ""), 150);

      setAnswer("no");
    });

    // restore state from URL without auto-confetti spam
    const a = new URLSearchParams(location.search).get("a");
    if (a === "yes") {
      msg.textContent = "Yaaay! ðŸ’–";
      gifwrap.style.display = "block";
    } else if (a === "no") {
      msg.textContent = "Hmmâ€¦ noch unsicher? ðŸ¥º";
    }
  </script>
</body>
</html>


